<hr/>
<section class="card" id="shipbox" role="contentinfo" aria-label="Calculate shipping">
	<div class="card-header"><h3 class="mb-0">Calculate Shipping</h3></div>
	<div class="card-body">
		[%if [@config:shipping_calc_type@] eq 'suburb_selector'%]
			<!-- suburb selector -->
			<input type="hidden" id="shloc_country" value="AU"/>
			<input type="hidden" name="shloc_state" id="shloc_state" value="[%session id:'ship_state'/%]"/>
			<div class="row">
				<div class="col-12 col-md-3">
					<input type="text" name="input" id="n_qty" value="[@qty@]" class="form-control" placeholder="Qty">
				</div>
				<div class="col-12 col-md-3">
					<input type="text" name="input" id="zip" value="[%session id:'ship_zip'/%]" class="form-control" placeholder="Post Code">
				</div>
				<div class="col-12 col-md-3 n-wrapper-form-control">
					<span id="shloc_selector"></span>
					<input type="text" name="shloc_city" id="shloc_city" value="[%session id:'ship_city'/%]" class="form-control" size="50" maxlength="50"/>
				</div>
				<div class="col-12 col-md-3">
					<button type="button" class="btn btn-primary btn-block btn-loads" data-loading-text="<i class='fa fa-sync fa-spin' style='font-size: 14px'></i>" onClick="refreshCalc()" title="Calculate">
						<i class="fa fa-sync" aria-hidden="true"></i> Calculate
					</button>
				</div>
			</div>
		[%elseif [@config:shipping_calc_type@] eq 'suburb_search'%]
			<!-- suburb search -->
			<input type="hidden" name="input" id="zip" value="[%session id:'ship_zip'/%]"  class="form-control" placeholder="Post Code">
			<input type="hidden" id="ship_country" value="AU"/>
			<input type="hidden" name="ship_state" id="ship_state" value="[@ship_state@]" />
			<input type="hidden" name="shloc_state" id="shloc_state" value="[%session id:'ship_state'/%]"/>
			<input type="hidden" name="input" id="n_qty" value="[%data id:'min_qty' if:'ne' value:'0' %][@min_qty@][%/ data%][%data id:'min_qty' if:'eq' value:'0' %]1[%/ data%]">
			<div class="row btn-stack">
				<div class="col-12 col-sm-7">
					<div class="form-group">
						<label for="ship_selector">Suburb/Post Code</label>
						<input type="text" id="ship_selector" class="form-control" value="[%session id:'ship_city'/%]" size="50" maxlength="50" autocomplete="off" placeholder="Enter Suburb" /><input type="hidden" name="ship_city" id="ship_city" value="[%session id:'ship_city'%][%/ session%]"/>
					</div>
				</div>
				<div class="col-12 col-sm-5">
					<label for="ship_selector">&nbsp;</label>
					<button type="button" class="btn btn-primary btn-block btn-loads" data-loading-text="<i class='fa fa-sync fa-spin' style='font-size: 14px'></i>" id="suburb_search_btn" onClick="javascript:$.load_ajax_template('_buying_options', {'showloading': '1', 'qty': $('#n_qty').val() , 'ship_city':$('#ship_selector').val() , 'ship_zip': $('#zip').val(),'ship_state': $('#ship_state').val()});" title="Calculate">
						<i class="fa fa-sync" aria-hidden="true"></i> Calculate
					</button>
				</div>
			</div>
		[%else%]
			<!-- postcode search -->
			<div class="row btn-stack">
				<div class="col-12 col-md-3">
					<input type="number" name="input" min="0" id="n_qty" value="[@qty@]" size="2" class="form-control" placeholder="Qty" aria-label="qty">
				</div>
				<div class="col-12 col-md-3">
					<select id="country" class="form-control" aria-label="Country">
						[%countries%]
							[%param *body%]
								<option value="[@country_code@]" [%if [@country_code@] eq [@ship_country@]%]selected[%/if%]>[@country_name@]</option>
							[%/ param%]
						[%/ countries%]
					</select>
				</div>
				<div class="col-12 col-md-3">
					<input type="text" name="input" id="zip" value="[@ship_zip@]" size="5" class="form-control" placeholder="Post Code" aria-label="Post code">
				</div>
				<div class="col-12 col-md-3">
					<button type="button" class="btn btn-block btn-primary btn-loads" data-loading-text="<i class='fa fa-sync fa-spin' style='font-size: 14px'></i>" onClick="javascript:$.load_ajax_template('_buying_options', {'showloading': '1', 'sku': '[@SKU@]', 'qty': $('#n_qty').val() , 'ship_zip': $('#zip').val(), 'ship_country': $('#country').val()}),$(this).button('loading');" title="Calculate">
						<i class="fa fa-sync" aria-hidden="true"></i> Calculate
					</button>
				</div>
			</div>
		[%/if%]
		[%shipping_methods sortby:'delivery_time' sku:'[@SKU@]' qty:'[@qty@]' zip:'[@ship_zip@]' country:'[@ship_country@]'%]
			[%param *header%]
				<br />
				<div role="alert" aria-atomic="true" aria-label="Shipping results">
			[%/ param%]
			[%param *body%]
				<div role="group" aria-label="Shipping method option">
				<hr aria-hidden="true"/>
				<strong>[@shipping_method@]</strong> - [%if [@cost@] == 0%] [%if [@na@] == 0%] [%if [@config:free_shipping_label_for_webstore@]%] [@config:free_shipping_label_for_webstore@] [%else%] Free [%/if%] [%else%] Not Applicable [%/if%] [%else%] [%format type:'currency'%][@cost@][%/format%] [%/if%] [%IF [@delivery_time@]%](ETA: [@delivery_time@] days)[%/ IF%]<br />
				<i class="text-muted">[@shipping_description@]</i>
				</div>
			[%/ param%]
			[%param *footer%]
				</div>
			[%/ param%]
			[%param *ifempty%]
				[%if [@ship_zip@]%]<br /><p class="alert alert-danger alert-shipping-error" aria-label="alert" role="alert" aria-atomic="true">Shipping not available to [@ship_zip@] [@ship_country@], please try another location.</p>[%/if%]
			[%/ param%]
		[%/ shipping_methods%]
	</div>
</section>